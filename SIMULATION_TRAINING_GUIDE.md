# 情境模擬訓練系統使用指南

## 系統特色

這是一個全新設計的**真實情境模擬訓練系統**，完全不同於傳統的選擇題訓練！

### 核心概念

**不是選擇題，是真實模擬！**

- 學員使用自然語言自由輸入操作
- 系統模擬真實設備反應
- 故障會隨時間自動演進惡化
- AI 專家只在詢問時才出現（蘇格拉底式引導）
- 自動評估診斷準確度、處理效率和安全意識

## 快速開始

### 1. 啟動系統

```bash
python start_simulation.py
```

系統會自動在瀏覽器開啟：http://127.0.0.1:7860

### 2. 開始訓練

1. 選擇難度（easy/medium/hard）
2. 點擊「開始新情境」
3. 系統會隨機生成一個故障情境
4. 開始你的處理！

### 3. 輸入範例

系統支援**自然語言輸入**，不需要固定格式：

#### 檢查類操作
- 「檢查冷卻水流量」
- 「看一下溫度」
- 「查看真空系統狀態」
- 「確認過濾網」

#### 調整類操作
- 「調整冷卻水流量到 5.5」
- 「提高冷卻水流量」
- 「降低溫度」

#### 維護類操作
- 「更換過濾網」
- 「清潔鏡片」
- 「校正對準系統」

#### 停機與重啟
- 「停機」
- 「緊急停機」
- 「確認停機」（當系統要求確認時）
- 「重新啟動」

#### 詢問 AI 專家
- 「為什麼溫度會上升？」
- 「現在應該怎麼辦？」
- 「請專家給建議」
- 「這樣做對嗎？」

## 訓練流程範例

### 情境：冷卻系統故障

**系統警報**
```
[警報] [23:45:12]

!! 冷卻系統故障 !!

- 鏡頭溫度開始上升

機台目前正在生產中...
你是現場工程師，請立即處理！
```

**學員操作流程**

1. **初步觀察**
   ```
   輸入：「檢查溫度」

   系統回應：
   [檢查溫度]
   鏡頭溫度：23.8°C（正常：22-24°C）
   溫度趨勢：[上升中] ↑↑↑
   ⚠ 溫度持續上升，需盡快處理
   ```

2. **檢查相關系統**
   ```
   輸入：「檢查冷卻水系統」

   系統回應：
   [檢查冷卻水系統]
   冷卻水流量計顯示：3.5 L/min（正常範圍：4.5-5.5）
   管路壓力：2.5 bar
   過濾器指示燈：[紅色] 堵塞警告
   ⚠ 流量偏低，可能影響散熱效果
   ⚠ 過濾器可能需要更換
   ```

3. **詢問專家（如果不確定）**
   ```
   輸入：「為什麼流量會下降？」

   AI 專家：
   你已經看到流量下降了。想想看，什麼情況會讓流量減少？

   過濾網堵塞是常見原因。你還記得上次更換是什麼時候嗎？
   ```

4. **決定停機**
   ```
   輸入：「停機」

   系統回應：
   [停機確認]
   停機會影響生產線的進度和產量。
   請確認是否真的需要停機？

   如果確定，請再次輸入：「確認停機」
   ```

5. **確認停機**
   ```
   輸入：「確認停機」

   系統回應：
   [執行停機程序]
   1. 通知產線主管... ✓
   2. 保存當前製程數據... ✓
   3. 完成當前晶圓曝光... ✓
   4. 安全關閉曝光光源... ✓
   5. 降低真空度... ✓
   6. 系統進入待機模式... ✓

   ✓ 安全停機完成，可以進行維護作業

   [AI 專家] 在這種情況下停機是明智的決定
   ```

6. **更換零件**
   ```
   輸入：「更換過濾網」

   系統回應：
   [更換filter]
   1. 關閉冷卻水閥門... ✓
   2. 卸下舊過濾網... ✓
   3. 安裝新過濾網... ✓
   4. 開啟冷卻水閥門... ✓
   5. 檢查是否洩漏... ✓

   ✓ 更換完成！冷卻水流量已恢復正常。
   ```

7. **重新啟動**
   ```
   輸入：「重新啟動」

   系統回應：
   [重新啟動系統]
   1. 系統自檢... ✓
   2. 啟動真空泵... ✓
   3. 真空度達標... ✓
   4. 啟動冷卻系統... ✓
   5. 光源預熱... ▓▓▓▓▓░░░░░ 50%
   6. 載入製程參數... ⏳

   預計 5 分鐘後可恢復生產
   ```

8. **情境完成**
   ```
   ==========================================
   [情境完成]

   故障已解決！機台可以恢復正常運作。

   處理時間：420 秒
   動作次數：7 次
   準確度：85.7%
   效率：88.2%
   安全性：100.0%

   總分：89.5 分

   [AI 專家 - 最終復盤]

   ## 情境回顧
   本次故障：冷卻系統故障
   根本原因：過濾網堵塞

   ## 你的表現
   診斷準確度：85.7%
   處理效率：88.2%
   安全意識：100.0%

   ## 做得好的地方
   - 診斷方向正確，能找到根本原因
   - 處理迅速，沒有浪費時間
   - 安全意識強，該停機時果斷停機

   ## 可以改進的地方
   （根據實際表現給出建議）

   ## 標準處理流程
   1. 檢查冷卻水系統
   2. 發現流量異常
   3. 檢查過濾網
   4. 停機
   5. 更換過濾網
   6. 重新啟動

   ## 關鍵學習點
   - 溫度異常要優先檢查冷卻系統
   - 過濾網堵塞是常見問題，定期保養很重要
   - 發現流量異常要及時處理，避免設備損壞
   ```

## 系統特性

### 1. 自然語言理解（NLU）

系統能理解多種表達方式：

- **檢查**：「檢查」、「查看」、「看」、「觀察」、「確認」
- **調整**：「調整」、「改變」、「設定」、「提高」、「降低」
- **更換**：「更換」、「替換」、「換」
- **停機**：「停機」、「關機」、「停止」、「緊急停止」
- **詢問**：「為什麼」、「怎麼辦」、「建議」、「專家」

### 2. 動態故障演進

故障會隨時間自動惡化：

- **第 0 階段**（0分鐘）：初期症狀出現
- **第 1 階段**（2-3分鐘）：症狀加重
- **第 2 階段**（5-6分鐘）：嚴重警告
- **第 3 階段**（10分鐘）：關鍵危險

**如果不及時處理，問題會越來越嚴重！**

### 3. AI 專家顧問

使用**蘇格拉底式提問**，不直接給答案：

❌ **不會說**：「你應該更換過濾網」

✅ **會引導**：
- 「你觀察到哪些異常現象？」
- 「流量下降可能是什麼原因？」
- 「這個情況需要停機嗎？」

### 4. 即時視覺化

- **設備示意圖**：故障部位會變紅色並閃爍
- **參數儀表板**：6個關鍵參數即時顯示
  - 鏡頭溫度
  - 冷卻流量
  - 真空壓力
  - 光源強度
  - X軸誤差
  - Y軸誤差
- **顏色編碼**：
  - 🟢 綠色：正常範圍
  - 🟠 橙色：警戒範圍
  - 🔴 紅色：異常範圍

### 5. 自動評估

系統會自動評估三個維度：

1. **診斷準確度（50%）**
   - 是否找到根本原因
   - 是否執行了正確的檢查

2. **處理效率（30%）**
   - 處理時間
   - 動作次數
   - 是否有不必要的嘗試

3. **安全意識（20%）**
   - 是否及時停機
   - 是否考慮安全風險

## 五種故障情境

### 1. 冷卻系統故障
- **症狀**：溫度上升
- **原因**：過濾網堵塞
- **處理時間**：約 30 分鐘
- **關鍵**：檢查流量 → 發現堵塞 → 停機更換

### 2. 真空系統洩漏
- **症狀**：真空度下降
- **原因**：密封圈老化
- **處理時間**：約 60 分鐘
- **關鍵**：使用氦氣檢測器定位洩漏點

### 3. 對準系統偏移
- **症狀**：對準誤差增加
- **原因**：機械振動
- **處理時間**：約 15 分鐘
- **關鍵**：及時停產 → 執行校正

### 4. 光學污染
- **症狀**：光源強度下降
- **原因**：鏡片污染
- **處理時間**：約 20 分鐘
- **關鍵**：檢查鏡片 → 專業清潔

### 5. 電力波動
- **症狀**：多系統同時異常
- **原因**：供電不穩
- **處理時間**：約 40 分鐘
- **關鍵**：識別共同原因 → 緊急停機

## 難度差異

### Easy（簡單）
- 提供明確提示
- 故障演進較慢
- AI 專家更主動提供線索

### Medium（中等）
- 少量提示
- 正常演進速度
- AI 專家適度引導

### Hard（困難）
- 無提示
- 故障快速惡化
- AI 專家只回應提問

## 技術架構

### 核心模組

1. **ScenarioEngine**（情境引擎）
   - 管理故障情境初始化
   - 控制故障動態演進
   - 評估處理結果

2. **NaturalLanguageController**（NLU 控制器）
   - 解析學員自然語言輸入
   - 識別意圖和參數
   - 驗證動作合法性

3. **ActionExecutor**（動作執行引擎）
   - 執行學員指令
   - 模擬真實設備反應
   - 更新系統狀態

4. **AIExpertAdvisor**（AI 專家顧問）
   - 蘇格拉底式提問引導
   - 情境相關的專業建議
   - 最終復盤分析

5. **LithographyDigitalTwin**（數位孿生）
   - 基於 SECOM 真實數據
   - 590 個感測器模擬
   - 高保真度狀態模擬

## 與論文的關聯

### 研究貢獻

1. **創新訓練模式**
   - 從「選擇題」到「自由模擬」
   - 更貼近真實工作場景
   - 培養獨立思考能力

2. **AI 輔助學習**
   - 蘇格拉底式引導而非直接答案
   - 促進深度學習
   - 可追蹤學習軌跡

3. **動態情境設計**
   - 故障隨時間演進
   - 培養緊迫感和決策能力
   - 真實壓力模擬

4. **多維度評估**
   - 不只看結果，也看過程
   - 診斷、效率、安全全面評估
   - 提供個性化改進建議

### 預期效益

根據設計目標：

- **70% 降低設備損壞**：及時正確處理故障
- **50% 縮短訓練時間**：沉浸式高效學習
- **60% 減少產品報廢**：提升診斷準確度

## 論文建議

### 實驗設計

1. **對照組實驗**
   - 實驗組：使用情境模擬系統
   - 對照組：傳統選擇題訓練
   - 比較：學習成效、診斷速度、操作準確性

2. **學習曲線分析**
   - 追蹤學員在多次訓練中的進步
   - 分析常見錯誤模式
   - 優化訓練內容

3. **AI 引導效果研究**
   - 有 AI 指導 vs 無 AI 指導
   - 不同提問策略的效果
   - 最佳引導時機

### 論文章節建議

1. **第一章：緒論**
   - 半導體設備訓練的挑戰
   - 傳統訓練方法的局限
   - 研究動機與目標

2. **第二章：文獻探討**
   - 數位孿生技術
   - 情境式學習理論
   - 蘇格拉底式教學法
   - 自然語言處理在教育中的應用

3. **第三章：系統設計**
   - 整體架構
   - 核心模組設計
   - NLU 演算法
   - 故障演進模型
   - AI 引導策略

4. **第四章：系統實作**
   - 技術選型
   - 實作細節
   - 介面設計

5. **第五章：實驗與評估**
   - 實驗設計
   - 受測者資料
   - 數據收集
   - 結果分析

6. **第六章：結論與未來工作**
   - 研究貢獻
   - 限制與未來改進
   - 應用展望

## 常見問題

### Q1：系統看不懂我的輸入？
A：嘗試用更明確的動詞開頭，例如：
- 「檢查冷卻水」
- 「調整流量」
- 「更換過濾網」

### Q2：不知道要做什麼？
A：可以隨時詢問 AI 專家：
- 「現在應該怎麼辦？」
- 「為什麼會這樣？」
- 「請給我建議」

### Q3：故障一直惡化怎麼辦？
A：這是真實情境！如果不處理，問題會越來越嚴重。需要：
1. 快速診斷
2. 果斷決策
3. 正確執行

### Q4：可以重複訓練嗎？
A：當然！每次點「開始新情境」會隨機產生不同的故障，可以反覆練習。

## 系統需求

- Python 3.8+
- Gradio 4.0+
- Pandas, NumPy
- 8GB RAM（建議）
- 現代瀏覽器（Chrome, Firefox, Edge）

## 聯絡與支援

如有問題或建議，請查看：
- README.md - 完整系統文檔
- QUICK_START.md - 快速開始指南
- PROJECT_OVERVIEW.md - 專案概覽

---

**開始訓練，成為專業的設備工程師！** 🎓
